{% extends "landing/base-hf.html" %}

{% load static %}

{% block title %}{% if articulo %}Editar artículo{% else %}Añadir artículo{% endif %}{% endblock %}

{% block main %}

    {#    todo el tooltip de algunos campos no funciona en chrome#}
    <form method="post" name="add-item" enctype="multipart/form-data" id="add-item-form">

        {% csrf_token %}
        {% if articulo %}
            <input type="hidden" name="data" value="{{ articulo.id }}">
        {% endif %}


        <div class="col-12"><h4>URL de tu tienda online</h4></div>
        <div class="col-12">{{ form.url }}</div>

        <div class="col-12 mt-5"><h4>Referencia interna SKU*</h4></div>
        <div class="col-12">{{ form.ref }}</div>

        <div class="col-12 mt-5"><h4>Nombre artículo*</h4></div>
        <div class="col-12">{{ form.nombre }}</div>

        <div class="col-12 mt-5"><h4>Descripción artículo</h4></div>
        <div class="col-12">{{ form.descripcion }}</div>

        {#            <div class="col-12 mt-5"><h4>Añadir foto*</h4></div>#}
        {#            <div class="col-6">#}
        {#                {% if form.imagen_principal %}<img src="{{ form.imagen_principal.url }}"/>#}
        {#                {% else %}<img src="{% static 'main/images/KC_nopic.png' %}"/>{% endif %}#}
        {#            </div>#}
        {#            <div class="col-5">{{ form.imagen_principal }}</div>#}


        <h4 class="col-12 text-left mt-5">Fotos actuales</h4>

        <div class="row justify-content-center align-items-center">
            <div id="carousel-example" class="carousel slide" data-ride="carousel">
                <div class="carousel-inner row w-100 mx-auto" role="listbox" id="multi-img-articulo">
                    {% if articulo %}
                        {% if articulo.galeriaarticulo_set.all|length > 0 %}
                            {% for imagen in articulo.galeriaarticulo_set.all %}
                                <div class="carousel-item col-12 col-sm-6 col-md-4 col-lg-3 portrait {% if forloop.first %}active{% endif %}">
                                    <img src="{{ imagen.imagen.url }}" class="img-fluid mx-auto d-block"
                                         alt="{{ imagen.imagen }}">
                                </div>
                            {% endfor %}
                        {% endif %}
                    {% endif %}
                </div>

                <a class="carousel-control-prev" href="#carousel-example" role="button"
                   data-slide="prev">
                    <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                    <span class="sr-only">Previous</span>
                </a>
                <a class="carousel-control-next" href="#carousel-example" role="button" data-slide="next">
                    <span class="carousel-control-next-icon" aria-hidden="true"></span>
                    <span class="sr-only">Next</span>
                </a>
            </div>
        </div>


        <h4 class="col-12 text-left mt-5">Añadir Fotos*
            <a href=""
               data-toggle="tooltip"
               title="Debes añadir al menos una foto">
                <img src="{% static 'landing/img/catalogo/categoria/info.png' %}"/> </a>
        </h4>

        <div class="col-12 text-left row align-items-center">
            <div id="">

            </div>
            <input class="hide" id="multi-img" onchange="readURLShow(this);" name="articulo-images" type="file"
                   size="50" accept="image/*"
                   multiple>
            <button type="button" id="kradle-button" class="btn-circle btn-lg "
                    onclick="document.getElementById('multi-img').click()">
                <i class="fa fa-plus"></i>
            </button>


        </div>


        <div class="col-12 col-sm-6 col-lg mt-5">
            <h4 class="">PVP*
                <a href=""
                   data-toggle="tooltip"
                   title="Podrás editar precios distintos por tallas o formatos en la pantalla de edición de artículos">
                    <img src="{% static 'landing/img/catalogo/categoria/info.png' %}"/> </a>
            </h4>
            <div>{{ form.pvp }}</div>

        </div>


        <div class="col-12 col-sm-6 col-lg mt-5">
            <h4>Precio coste*
                <a href=""
                   data-toggle="tooltip"
                   title="En caso de robo o desaparición de stock en tienda, será necesario este precio para
                       reclamar al seguro">
                    <img src="{% static 'landing/img/catalogo/categoria/info.png' %}"/> </a>
            </h4>
            <div>{{ form.precio_coste }}</div>

        </div>

        <div class="col-12 col-lg mt-5">
            <h4>Precio comparación
                <a href=""
                   data-toggle="tooltip"
                   title="El precio de venta siempre será el PVP. En caso de que quieras que la etiqueta refleje
                       una precio con el que comparar “Antes estaba a X €”. Deberás añadirlo aquí">
                    <img src="{% static 'landing/img/catalogo/categoria/info.png' %}"/> </a>
            </h4>
            <div>{{ form.precio_comparacion }}</div>

        </div>

        <div class="col-12 mt-5">
            *Las siguientes son opcionales, te ayudarán para analizar la información de ventas, etc.
            {% include 'landing/empresa/inc/dropdowns.html' %}
        </div>


        <div class="col-12 mt-5 justify-content-left">

            <h3 class="col">Añadir variantes
                <a href=""
                   data-toggle="tooltip"
                   title="Se creará una URL dentro de kradleco por cada variante que indiques a continuación.
                       Si quieres vender a distintos precios según la variante, puedes editarlo desde el editor masivo">
                    <img src="{% static 'landing/img/catalogo/categoria/info.png' %}"/> </a>
            </h3>
            <button onclick="showNextTag(1)" type="button" id="kradle-button1" class="col btn-circle btn-lg"
                    {% if articulo.variantes.all.0 %}style="display:none;"{% endif %}>
                <i class="fa fa-plus"></i>
            </button>

        </div>
        <div id="variaciones" class="col-12">
            {% include "landing/empresa/inc/variacion-articulo.html" %}
        </div>
        <input type="hidden" id="mis_variaciones" name="mis_variaciones" value="empty"/>
        <input type="hidden" id="variaciones_tags" name="variaciones_tags" value="empty"/>
        <div class="col-12 text-center mt-5">
            <button name="save_item" type="submit" onclick="getVariacionesList()" value="Guardar"><i
                    class="fa fa-check"></i> Guardar
            </button>
        </div>
        </div>
        <input type="hidden" name="from" value="save_ok"/>
    </form>


{% endblock %}

{% block styles %}
    <link rel="stylesheet" href="{% static 'landing/css/image-carousel.css' %}"/>
{% endblock %}
{% block script %}
    <script src="{% static 'main/assets/js/image-carousel.js' %}"></script>
{% endblock %}