
{% extends 'dashboard/fotografo/base-fotografo.html' %}

{% load static %}
{% load i18n %}

{% block main %}

    <script defer>
      var compras = '{{ compras.count }}';
      const array_compras = '{{ array_compras }}';
      const array_photo = '[]';
      const array_surf = '[]';
    </script>

    <style>
        .bot-stats {
            color: white !important;
            font-size: 1.5em;

        }

        .bot-camera {
            position: relative;
            left: 7px;
        }
    </style>

    <div class="content-header">
      <div class="container-fluid">
        <div class="row mb-2">
          <div class="col-sm-12">
            <ol class="breadcrumb float-sm-left">
              <li class="breadcrumb-item"><a href="{% url 'dashboard' %}">{% trans 'Home' %}</a></li>
              <li class="breadcrumb-item active"></li>
            </ol>
          </div><!-- /.col -->
        </div><!-- /.row -->
      </div><!-- /.container-fluid -->
    </div>

    <div class="section">
        <div class="container-fluid row">
        <div class="row col-lg-9 ml-1">
        <div class="col-12">
            <div class="card">
              <div class="card-header" style="height: 50px;">
                <h5 class="card-title" style="line-height: 25px">Balance total</h5>
                  <i class="fab fa-stripe fa-3x ml-3" style="position: relative; bottom: 12px; margin-bottom: -10px; color: #000058"></i>
                <div class="card-tools">
                  <button type="button" class="btn btn-tool" data-card-widget="collapse">
                    <i class="fas fa-minus"></i>
                  </button>
                  <button type="button" class="btn btn-tool" data-card-widget="remove">
                    <i class="fas fa-times"></i>
                  </button>
                </div>
              </div>
              <!-- /.card-header -->
              <div class="card-body" style="display: block;">
                <div class="row">
                <div class="col-6">
                    Disponible
                    <br>
                    <h1 class="display-4" style="font-size: 36px;">
                        {{ disponible }}<span style="font-size: 24px">€</span>
                    </h1>
                </div>
                <div class="col-6">
                    Pendiente
                    <br>
                    <h1 class="display-4" style="font-size: 36px;">
                        {{ retenido }}<span style="font-size: 24px">€</span>
                    </h1>
                </div>
                <div class="col-12 mt-3" style="font-size: 12px">
                    Esta información puede tardar en actualizarse hasta 12 horas. <br>
                    <span class="mt-1">Para más información consulta tu panel de Stripe <a href="https://dashboard.stripe.com/">aquí</a></span>
                </div>
                    <!-- /.chart-responsive -->
                  </div>
                  <!-- /.col -->
                </div>
                <!-- /.row -->
              </div>
              <!-- ./card-body -->

              <!-- /.card-footer -->
            </div>
            <!-- /.card -->

              <div class="col-md-12">
            <div class="card">
              <div class="card-header">
                <h5 class="card-title">Registro semanal de ventas ( {{ purchases_last_week }} )</h5>

                <div class="card-tools">
                  <button type="button" class="btn btn-tool" data-card-widget="collapse">
                    <i class="fas fa-minus"></i>
                  </button>
                  <button type="button" class="btn btn-tool" data-card-widget="remove">
                    <i class="fas fa-times"></i>
                  </button>
                </div>
              </div>
              <!-- /.card-header -->
              <div class="card-body" style="display: block;">
                <div class="row">
                  <div class="col-md-12">
                    <div class="chart"><div class="chartjs-size-monitor"><div class="chartjs-size-monitor-expand"><div class=""></div></div><div class="chartjs-size-monitor-shrink"><div class=""></div></div></div>
                      <!-- Sales Chart Canvas -->
                      <canvas id="salesChart" height="180" style="height: 300px; display: block; width: 513px;" width="513" class="chartjs-render-monitor"></canvas>
                    </div>
                    <!-- /.chart-responsive -->
                  </div>
                  <!-- /.col -->
                </div>
                <!-- /.row -->
              </div>
              <!-- ./card-body -->

              <!-- /.card-footer -->
            </div>
            <!-- /.card -->
          </div>
        </div>
        <div class="row col-lg-3 ml-1">
             <div class="card col-12" style="">
              <div class="card-header">
                <h5 class="card-title">Spots con más ventas</h5>

                <div class="card-tools">
                  <button type="button" class="btn btn-tool" data-card-widget="collapse">
                    <i class="fas fa-minus"></i>
                  </button>
                  <button type="button" class="btn btn-tool" data-card-widget="remove">
                    <i class="fas fa-times"></i>
                  </button>
                </div>
              </div>
              <!-- /.card-header -->
              <div class="card-body" style="display: block;">
                <div class="row">
                  <div class="col-md-12">
                    <ul class="list-group">
                        {% for dict in array %}
                            <li class="list-group-item d-flex justify-content-between align-items-center mb-2">
                                {{ dict.producto__spot__nombre }}
                                <span class="badge badge-primary badge-pill">{{ dict.dcount }}</span>
                            </li>
                        {% endfor %}
                    </ul>
                      <!-- Sales Chart Canvas -->
                    </div>
                    <!-- /.chart-responsive -->
                  </div>
                  <!-- /.col -->
                </div>
                <!-- /.row -->
              </div>
        </div>



    </div>


</div>

{% endblock %}